"use strict";var _extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},omit=require("lodash/omit"),React=require("react"),ReactDOM=require("react-dom"),qs=require("query-string"),DEFAULT_PROPS={usePlaceholder:!1,placeholder:{theme:"vine",auto:!0}},Img=React.createClass({displayName:"Img",propTypes:{src:React.PropTypes.string.isRequired,usePlaceholder:React.PropTypes.bool,placeholder:React.PropTypes.object},getDefaultProps:function(){return DEFAULT_PROPS},render:function(){var e=this.props,r=this.props,t=r.width,o=r.height,a=omit(e,"src","usePlaceholder","placeholder");if(e.usePlaceholder){var s=qs.stringify(e.placeholder),i="holder.js/"+t+"x"+o+"?"+s,l=omit(a,"width","height");return React.createElement("img",_extends({},l,{ref:"placeholder","data-src":i}))}return React.createElement("img",_extends({},a,{src:e.src}))},componentDidMount:function(){this._initPlaceholderImage()},componentDidUpdate:function(){this._initPlaceholderImage()},_initPlaceholderImage:function(){if(this.props.usePlaceholder){var e=ReactDOM.findDOMNode(this.refs.placeholder),r=require("holderjs");r.run({domain:"holder.js",images:e,object:null,bgnodes:null,stylenodes:null})}}});Img.DEFAULT_PROPS=DEFAULT_PROPS,module.exports=Img;